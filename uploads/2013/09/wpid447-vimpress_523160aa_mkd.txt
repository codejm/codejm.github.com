在 Redhat x86_64 GNU/Linux环境下以源码方式编译安装vim 7.3 （vim官网），运行./configure --prefix=/home/work/tools/vim-7.3一段时间后报错：
<pre class="brush: shell; gutter: true">
configure: error: cannot compute sizeof (off_t) See `config.log' for more details.(exit status = 77)
</pre>

google发现，原因为编译时缺少iconv的相关lib，而本地which iconv可以看到机器上是装有iconv的（which iconv输出结果为：/usr/local/bin/iconv）

这篇文章中的解决方法为修改/etc/ld.so.conf，确实可以解决问题，但对于非root用户来说，/etc/ld.so.conf是read-only的，比较无语。
后来想想，修改ld.so.conf的根本原因只是为了让编译器在make过程中去对应的路径下寻找依赖，于是，一个针对非root用户的办法就有啦，没错，就是通过LD_LIBRARY_PATH来曲线救国，^_^。
在vim73目录下先执行如下命令：

<pre class="brush: shell; gutter: true">
export LD_LIBRARY_PATH=/usr/local/lib/:$LD_LIBRARY_PATH // 为编译器设定额外的搜索路径
./configure --enable-multibyte --with-features=huge --enable-fontset --enable-hangulinput --enable-netbeans --enable-cscope --enable-sniff --enable-tclinterp --enable-rubyinterp=dynamic --enable-luainterp --enable-mzschemeinterp --enable-xim --enable-gui=gnome2 --enable-gtk2-check --enable-gnome-check --enable-perlinterp=dynamic --enable-pythoninterp=dynamic --disable-selinux
</pre>

最后 make && make install 就可以编译成功了

=============== EOF ============ 